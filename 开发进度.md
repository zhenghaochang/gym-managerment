# 健身房管理系统开发进度

## 项目信息
- 前端：Vue3 + Element Plus + Pinia + Vue Router
- 后端：Spring Boot 2.7.18 + Spring Security + JWT
- 数据库：MySQL（待配置）

---

## ✅ 已完成功能

### 前端部分
1. **登录注册页面**
   - 渐变背景 + 卡片设计
   - 表单校验（Element Plus + 弹窗提示）
   - 验证码功能
   - 文件：`gym-front/src/views/login.vue`, `register.vue`

2. **公共样式系统**
   - 提取到 `gym-front/src/style/` 目录
   - 包含：common.css, form.css, button.css, components.css
   - 统一入口：index.css

3. **主布局系统**
   - 左侧菜单：`MainMenu.vue`（深色系，低调奢华）
   - 顶部导航：`Navigation.vue`（深色系，统一风格）
   - 登录注册页独立布局（无菜单导航）
   - 主题色：紫色系 (#667eea, #89b4fa)

4. **动态权限菜单**
   - Pinia Store：`gym-front/src/stores/permission.js`
   - 菜单配置：`gym-front/src/utils/menuConfig.js`
   - 支持 4 种角色：superAdmin, admin, coach, member
   - 基于 SQL 权限表结构设计
   - 支持链式调用

5. **API 架构**
   - 多微服务架构：userService(8081), productService(8082), orderService(8083)
   - 统一拦截器：自动添加 token、错误处理、401 跳转
   - API 模块：user.js, member.js, course.js, order.js
   - 支持 Promise 链式调用

6. **路由守卫**
   - 未登录访问系统页 → 跳转登录
   - 已登录访问登录页 → 跳转 Dashboard
   - 退出登录清除 token 和 Store

---

## 🚧 进行中

### 后端 Spring Security 集成
- [x] 创建 LoginUser 实现 UserDetails
- [x] 创建 UserDetailsServiceImpl
- [] 创建 JwtAuthenticationTokenFilter
- [ ] 配置 SecurityConfig
- [ ] 创建 SecurityUtils 工具类
- [ ] 修改 JwtUtil（改为 Spring Security 方式）
- [ ] 创建 LoginService
- [ ] 配置 application.yml
- [ ] 添加 Maven 依赖

**参考信息：**
- Spring Boot 版本：2.7.18
- Spring Security 版本：5.7.x
- JWT 库：jjwt 0.11.5
- 现有工具类：`zhenghc.common.util.JwtUtil`（使用 ThreadLocal）

---

## 📋 待办功能

### 后端模块
- [ ] 用户管理模块
- [ ] 会员管理模块
- [ ] 课程管理模块
- [ ] 订单管理模块
- [ ] 器械管理模块
- [ ] 财务管理模块

### 前端页面
- [ ] Dashboard 页面
- [ ] 系统管理页面
- [ ] 会员管理页面
- [ ] 课程管理页面
- [ ] 其他业务页面

---

## 📝 技术要点

### 样式风格
- 深色系主题（菜单、导航栏）
- 紫色系主题色 (#667eea, #764ba2)
- 简约大方有质感，低调但高级

### 表单校验
- 必填字段使用 `change` 触发（短信验证码除外用 `blur`）
- 输入框下方红色提示 + 弹窗提示

### 权限设计
- 基于 SQL 权限表（id, permission_name, permission_code, resource_type, url, parent_id, sort_order）
- 菜单类型权限（resource_type='menu'）
- 树形结构（parent_id 关联）

---

## 🔧 开发环境

### 前端
- Node.js 版本：（待确认）
- 包管理器：npm
- 开发服务器：Vite（自动打开浏览器）

### 后端
- JDK 版本：（待确认）
- 构建工具：Maven
- 微服务端口：8081, 8082, 8083

---

## 📌 注意事项

1. 使用 Spring Security 的 SecurityContextHolder 替代 ThreadLocal
2. 保留现有的 JwtUtil 工具类，只需完善而不是替换
3. 菜单数据结构按照 SQL 权限表设计
4. 前端 API 请求推荐使用 async/await 语法
5. Pinia Store 支持链式调用

---

## 🎯 下一步计划

1. 完成 Spring Security 集成
2. 实现登录接口（替换前端假数据）
3. 实现权限接口（从数据库获取）
4. 创建 Dashboard 页面
5. 开发具体业务模块

---

**最后更新：** 2024-12-21
**当前阶段：** 前端基础框架完成，开始后端开发
